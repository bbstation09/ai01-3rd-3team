<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock Ticket Page - Testing</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Malgun Gothic', Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
        }

        h2 {
            color: #667eea;
            margin: 30px 0 15px;
        }

        .stage {
            margin: 20px 0;
            padding: 20px;
            background: #fafafa;
            border-radius: 5px;
        }

        .btn {
            padding: 12px 24px;
            margin: 10px 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.2s;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: #4CAF50;
            color: white;
        }

        .btn-success:hover {
            background: #45a049;
        }

        /* Seats */
        .seat-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
        }

        .seat {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            border-radius: 5px;
            font-size: 11px;
            font-weight: bold;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .seat:hover:not(.sold) {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .seat.sold {
            background: #bbb;
            color: #666;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .seat.selected {
            background: #ff9800;
            border-color: #f57c00;
            transform: scale(1.05);
        }

        /* Popup */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 998;
            backdrop-filter: blur(3px);
        }

        .popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 40px;
            border-radius: 10px;
            z-index: 999;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            min-width: 400px;
            text-align: center;
        }

        .popup h3 {
            margin-bottom: 15px;
            color: #667eea;
        }

        .popup p {
            margin-bottom: 20px;
            color: #666;
        }

        /* Zones */
        .zone {
            display: inline-block;
            padding: 15px 30px;
            margin: 10px;
            background: #e3f2fd;
            border: 2px solid #2196f3;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            color: #1976d2;
        }

        .zone:hover {
            background: #2196f3;
            color: white;
            transform: translateY(-2px);
        }

        /* Payment */
        .payment-success {
            text-align: center;
            padding: 40px;
        }

        .payment-success h2 {
            color: #4CAF50;
            font-size: 32px;
            margin-bottom: 20px;
        }

        .payment-form {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 8px;
            margin-top: 20px;
        }

        /* Info box */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .info-box strong {
            color: #1976d2;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ« Mock Ticketing Site (í…ŒìŠ¤íŠ¸ìš©)</h1>

        <div class="info-box">
            <strong>ğŸ“Œ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤:</strong><br>
            1. Extension ì‹œì‘ â†’ 2. "ì˜ˆë§¤í•˜ê¸°" ë²„íŠ¼ ìë™ í´ë¦­ â†’ 3. íŒì—… ìë™ ë‹«ê¸° â†’
            4. êµ¬ì—­ ì„ íƒ â†’ 5. ì¢Œì„ ì„ íƒ â†’ 6. í™•ì¸ â†’ 7. ê²°ì œ í˜ì´ì§€
        </div>

        <!-- Stage 0: Initial -->
        <div id="stage0" class="stage">
            <h2>ğŸ  Stage 0: ì´ˆê¸° í™”ë©´</h2>
            <p>Chrome Extensionì„ ì‹œì‘í•˜ë©´ ìë™ìœ¼ë¡œ "ì˜ˆë§¤í•˜ê¸°" ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤.</p>
            <button id="btnReserve" class="btn btn-primary">ì˜ˆë§¤í•˜ê¸°</button>
        </div>

        <!-- Popup -->
        <div class="overlay" id="overlay"></div>
        <div class="popup" id="popup">
            <h3>âš ï¸ ì•ˆë‚´</h3>
            <p>ì¢Œì„ ì„ íƒ í™”ë©´ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
            <button class="btn btn-success" onclick="closePopup()">í™•ì¸</button>
        </div>

        <!-- Stage 1: Zone Selection -->
        <div id="stage1" class="stage" style="display:none;">
            <h2>ğŸ—ºï¸ Stage 1: êµ¬ì—­ ì„ íƒ</h2>
            <p>ì›í•˜ëŠ” êµ¬ì—­ì„ ì„ íƒí•˜ì„¸ìš”:</p>
            <div class="zone-container">
                <div class="zone" data-zone-id="vip" onclick="selectZone('VIP')">VIP</div>
                <div class="zone" data-zone-id="r" onclick="selectZone('R')">Rì„</div>
                <div class="zone" data-zone-id="s" onclick="selectZone('S')">Sì„</div>
            </div>
        </div>

        <!-- Stage 2: Seat Selection -->
        <div id="stage2" class="stage" style="display:none;">
            <h2>ğŸª‘ Stage 2: ì¢Œì„ ì„ íƒ</h2>
            <p>ì„ íƒí•œ êµ¬ì—­: <strong id="selectedZone"></strong></p>
            <div class="seat-container" id="seats"></div>
            <button id="btnConfirm" class="btn btn-success" style="display:none;">ì¢Œì„ì„ íƒì™„ë£Œ</button>
        </div>

        <!-- Stage 3: Payment -->
        <div id="stage3" class="stage" style="display:none;">
            <div class="payment-success">
                <h2>âœ… ì˜ˆë§¤ ì„±ê³µ!</h2>
                <p>ì¢Œì„ ì„ íƒì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                <div class="payment-form">
                    <h3>ğŸ’³ ê²°ì œ í™”ë©´</h3>
                    <p>ì„ íƒ ì¢Œì„: <span id="selectedSeatsInfo"></span></p>
                    <p>ì´ ê¸ˆì•¡: <strong>â‚©50,000</strong></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedSeats = [];

        // Stage 0: Reserve button click
        document.getElementById('btnReserve').addEventListener('click', () => {
            console.log('[Mock] Reserve button clicked');
            showPopup();
        });

        function showPopup() {
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('popup').style.display = 'block';
        }

        function closePopup() {
            console.log('[Mock] Popup closed');
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('popup').style.display = 'none';

            // Go to zone selection
            document.getElementById('stage0').style.display = 'none';
            document.getElementById('stage1').style.display = 'block';
        }

        function selectZone(zoneName) {
            console.log('[Mock] Zone selected:', zoneName);
            document.getElementById('selectedZone').textContent = zoneName;
            document.getElementById('stage1').style.display = 'none';
            document.getElementById('stage2').style.display = 'block';

            generateSeats(zoneName);
        }

        function generateSeats(zone) {
            const container = document.getElementById('seats');
            container.innerHTML = '';

            // Generate 50 seats (some sold)
            for (let row = 0; row < 5; row++) {
                for (let col = 0; col < 10; col++) {
                    const seatNum = row * 10 + col;
                    const seat = document.createElement('div');

                    // Randomly mark some as sold
                    const isSold = Math.random() < 0.3; // 30% sold

                    seat.className = isSold ? 'seat sold' : 'seat';
                    seat.textContent = String.fromCharCode(65 + row) + (col + 1);
                    seat.dataset.seatId = `${zone}-${row}-${col}`;
                    seat.dataset.row = row;
                    seat.dataset.col = col;
                    seat.dataset.seatStatus = isSold ? 'sold' : 'available';

                    if (!isSold) {
                        seat.addEventListener('click', function () {
                            toggleSeat(this);
                        });
                    }

                    container.appendChild(seat);
                }
            }
        }

        function toggleSeat(seatEl) {
            const seatId = seatEl.dataset.seatId;

            if (seatEl.classList.contains('selected')) {
                seatEl.classList.remove('selected');
                selectedSeats = selectedSeats.filter(id => id !== seatId);
            } else {
                seatEl.classList.add('selected');
                selectedSeats.push(seatId);
            }

            console.log('[Mock] Seats selected:', selectedSeats);

            // Show/hide confirm button
            const btn = document.getElementById('btnConfirm');
            btn.style.display = selectedSeats.length > 0 ? 'block' : 'none';
        }

        document.getElementById('btnConfirm').addEventListener('click', () => {
            console.log('[Mock] Confirm clicked');
            if (selectedSeats.length > 0) {
                goToPayment();
            }
        });

        function goToPayment() {
            document.getElementById('stage2').style.display = 'none';
            document.getElementById('stage3').style.display = 'block';
            document.getElementById('selectedSeatsInfo').textContent = selectedSeats.join(', ');

            // Simulate URL change
            history.pushState({}, '', '/payment');
            console.log('[Mock] Navigated to payment page');
        }

        // Log page ready
        console.log('[Mock] Test page loaded. Ready for automation testing.');
    </script>
</body>

</html>