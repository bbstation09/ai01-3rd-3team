<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í• ì¸ê¶Œì¢… ì„ íƒ | í‹°ì¼“ ì˜ˆë§¤</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/discount_select.css">
</head>

<body>
    <header class="header">
        <a href="/performances" class="logo">TICKET<span>PARK</span></a>
        <div class="timer" id="timer">05:00</div>
    </header>

    <div class="step-indicator">
        <div class="steps">
            <div class="step completed">
                <div class="step-num">âœ“</div><span>ì¢Œì„ì„ íƒ</span>
            </div>
            <div class="step-line completed"></div>
            <div class="step active">
                <div class="step-num">2</div><span>í• ì¸ê¶Œì¢…</span>
            </div>
            <div class="step-line"></div>
            <div class="step">
                <div class="step-num">3</div><span>ì˜ˆë§¤ì •ë³´</span>
            </div>
            <div class="step-line"></div>
            <div class="step">
                <div class="step-num">4</div><span>ê²°ì œ</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="section">
            <div class="section-header">ğŸ« ì˜ˆë§¤ ì •ë³´</div>
            <div class="section-body">
                <div class="info-row"><span>ê³µì—°ëª…</span><strong>{{ performance.title }}</strong></div>
                <div class="info-row"><span>ì¼ì‹œ</span><strong>{{ selected_date }} {{ selected_time }}</strong></div>
                <div class="info-row"><span>ì¥ì†Œ</span><strong>{{ performance.venue }}</strong></div>
                <div class="info-row">
                    <span>ì„ íƒ ì¢Œì„</span>
                    <div class="seat-tags">
                        {% for seat in selected_seats %}<span class="seat-tag">{{ seat }}</span>{% endfor %}
                    </div>
                </div>
                <div class="info-row"><span>í‹°ì¼“ ê¸ˆì•¡</span><strong style="color: #ff6b6b;">{{ "{:,}".format(total_price)
                        }}ì›</strong></div>
            </div>
        </div>

        <div class="section">
            <div class="section-header">ğŸ’³ í• ì¸ê¶Œì¢… ì„ íƒ</div>
            <div class="section-body">
                <div class="discount-grid">
                    <label class="discount-option selected" onclick="selectDiscount(this, 'normal')">
                        <input type="radio" name="discount" value="normal" checked>
                        <div class="discount-radio"></div>
                        <div class="discount-info">
                            <h4>ì¼ë°˜</h4>
                            <p>í• ì¸ ì—†ìŒ</p>
                        </div>
                    </label>
                    <label class="discount-option" onclick="selectDiscount(this, 'disabled')">
                        <input type="radio" name="discount" value="disabled">
                        <div class="discount-radio"></div>
                        <div class="discount-info">
                            <h4>ì¥ì• ì¸</h4>
                            <p>ë³µì§€ì¹´ë“œ ì†Œì§€ì</p>
                        </div>
                        <span class="discount-rate">50%</span>
                    </label>
                    <label class="discount-option" onclick="selectDiscount(this, 'veteran')">
                        <input type="radio" name="discount" value="veteran">
                        <div class="discount-radio"></div>
                        <div class="discount-info">
                            <h4>êµ­ê°€ìœ ê³µì</h4>
                            <p>ìœ ê³µìì¦ ì†Œì§€ì</p>
                        </div>
                        <span class="discount-rate">30%</span>
                    </label>
                    <label class="discount-option" onclick="selectDiscount(this, 'senior')">
                        <input type="radio" name="discount" value="senior">
                        <div class="discount-radio"></div>
                        <div class="discount-info">
                            <h4>ê²½ë¡œ</h4>
                            <p>ë§Œ 65ì„¸ ì´ìƒ</p>
                        </div>
                        <span class="discount-rate">20%</span>
                    </label>
                </div>
            </div>
        </div>

        <div class="action-bar">
            <button class="btn btn-back" onclick="history.back()">ì´ì „</button>
            <button class="btn btn-next" onclick="goNext()">ë‹¤ìŒ ë‹¨ê³„</button>
        </div>
    </div>

    <script>
        // í…œí”Œë¦¿ ë³€ìˆ˜
        const perfId = "{{ performance.id }}";
        const selectedDate = "{{ selected_date }}";
        const selectedTime = "{{ selected_time }}";
        const selectedSeats = "{{ selected_seats | join(',') }}";
    </script>
    <script src="/static/js/discount_select.js"></script>
</body>

</html>