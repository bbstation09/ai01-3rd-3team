<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¢Œì„ ì„ íƒ | í‹°ì¼“ ì˜ˆë§¤</title>
    <link rel="stylesheet" href="/static/css/common.css">
    <link rel="stylesheet" href="/static/css/seat_select.css">
</head>

<body>
    <header class="header">
        <a href="/performances" class="logo">TICKET<span>PARK</span></a>
        <div class="header-info">
            <span style="color:#666">{{ selected_date }} {{ selected_time }}</span>
            <div class="timer" id="timer">10:00</div>
        </div>
    </header>

    <div class="perf-bar">
        <div class="perf-title-bar">{{ performance.title }}</div>
        <div class="perf-date-bar">{{ selected_section }} êµ¬ì—­ | {{ selected_grade }}ì„</div>
    </div>

    <div class="main-container">
        <div class="seat-section">
            <div class="stage">ğŸ¤ STAGE</div>

            <div class="seat-legend">
                <div class="legend-item">
                    <div class="legend-box vip"></div> VIPì„
                </div>
                <div class="legend-item">
                    <div class="legend-box r"></div> Rì„
                </div>
                <div class="legend-item">
                    <div class="legend-box selected"></div> ì„ íƒë¨
                </div>
                <div class="legend-item">
                    <div class="legend-box sold"></div> ë§¤ì§„
                </div>
            </div>

            <div class="seat-container">
                <div class="seat-grid" id="seatGrid">
                    <!-- ì¢Œì„ì€ JavaScriptë¡œ ë™ì  ìƒì„± -->
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="sidebar-box">
                <h3 class="sidebar-title">ğŸ« ì„ íƒí•œ ì¢Œì„</h3>
                <div class="selected-seats" id="selectedSeats">
                    <span class="no-seat">ì¢Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš” (ìµœëŒ€ 4ì„)</span>
                </div>
                <div class="price-info">
                    <div class="price-row">
                        <span>ì„ íƒ ì¢Œì„</span>
                        <span id="seatCount">0ì„</span>
                    </div>
                    <div class="price-row total">
                        <span>ì´ ê¸ˆì•¡</span>
                        <span class="amount" id="totalPrice">0ì›</span>
                    </div>
                </div>
            </div>

            <div class="notice-box">
                <strong>âš ï¸ ì•ˆë‚´ì‚¬í•­</strong>
                â€¢ ì¢Œì„ ì„ íƒ í›„ 10ë¶„ ì´ë‚´ ê²°ì œí•´ì£¼ì„¸ìš”.<br>
                â€¢ ì„ íƒí•œ ì¢Œì„ì€ ë‹¤ë¥¸ ì‚¬ìš©ìì—ê²Œ ë¨¼ì € ì ìœ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                â€¢ í• ì¸ê¶Œì¢… ë° ê²°ì œëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì„ íƒí•©ë‹ˆë‹¤.<br>
                â€¢ ì„ íƒ ì™„ë£Œ í›„ 10ë¶„ ì´ë‚´ ê²°ì œí•´ì£¼ì„¸ìš”.
            </div>

            <button class="btn-book" id="btnBook" disabled onclick="goToCheckout()">
                ì¢Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš”
            </button>
        </div>
    </div>

    <script>
        // í…œí”Œë¦¿ ë³€ìˆ˜
        const sessionId = "{{ session_id }}";
        const perfId = "{{ performance.id }}";
        const selectedDate = "{{ selected_date }}";
        const selectedTime = "{{ selected_time }}";
        const prices = {{ performance.price | tojson | safe }};
        const mode = "{{ mode }}";
        const selectedSection = "{{ selected_section }}";
        const selectedGrade = "{{ selected_grade }}";
    </script>
    <script src="/static/js/log_collector.js"></script>
    <script src="/static/js/seat_select.js"></script>
</body>

</html>